<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <meta name="viewport"
        content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />

    <title>PDFium - WebAssembly Test</title>

    <link rel="shortcut icon"
        href="data:image/x-icon;base64,UklGRtASAABXRUJQVlA4TMMSAAAv/8F/EH+HoG3blD/pSG32UxAQFPk/moCg4P/oBAJJavtDbbRtG40NOT0jwgYBAkDAAQFAArDLICAARjA1HRADCqxhf04whCEM6ImQMVZQZtiCTlFLXHTwzajPNiRT6yOoEadHVvdlHLEhZO3/Bn1WkWhFmstFBanIWjp4GADaldJs2641A0NREAULii0ae+8pGsXexd6wlzD2hmLXSGJNQdMsxF4wWC+97JpgwBpFbFhADG3KWfePEGbW2mc4M+tuRPR/ArDc/+X+L/d/uf/L/V/u/3L//2+/trtnjx49e7dY4mzXv587vJ0FSvRvFfe7TdSyt/euAG5XW/xUyrST/fyA1jIpU8K0Y62BMcD6Vrz+6gbMlbcUilZxvD8o2Oa5XN1rA4quKRaqw6GgbPO/RGqTCRQO2i1P2jJQfIM4JYDyicKUBDo8LkpXLXqo8lKQ8uqDLscKUhzoNF2MMvz0EitGg0GvFQuE6Dbo95gQjdeRVYZeBejoMxlKBB2Hy1BLPcF7CcoAXf8tQau4Qhv5s6RJUAeOlhvPvdDw6TiOqwKUDfQRJzQs+UIzuisCtIfhBrr4hu6mAE2mi0dXM+gyBKgRWeX3Lp2jeyY/b4B8Drr8G12B/KTQ3XRtO1lFlN+VZJGaawlk9QVoGNlodH0m2acC9DHZNjeGksXIT5GZ7Kobn5LNk58MoDblu9GQbIv8HCZrgG6Gkh2Vn0Syfm7kA/lf8vMlmdWNh3Tv5Wcw2TY3LpBFoPy2JzvpRjJZWwGqRXbXjUSyYfKj+ZMVuLGAbL785AB1OLo5mmyr/Nwna+5ON7Jj8nOFLNqdhmRp8nOSbJQbWiBZjvwkk81yIxuoAzT52Um2zI0bZI1QfreQrXfjAFkPAdpIttWNr8hiBWgVWZIbM8hWCFA82S9u9Cb7UYCWkO1zoyHZeQFaRJbsmt1CliVAC9V4CNQBTgFaTLbXtRNkjVCAl5L97FoiWV8JSiD7wbVpZFYJWku2xbUvyLZL0Ddk61yrQXZagn4gW+rSWyB/JkF7yWa6dIEsRJOgE2QjXfqOrD1K8EWyni7FkY0ToQyyVi71IFsrQtlkNVzRIsiOipDDTGW2u/AcyP8WIaxGBVkunCQLdspQK7L/uLCBrD3KcB+y3S6MIYsVoilkq1xoSva1EK0mm1BavpnsrBDtJutS2mUgzxGiy2ThpW0ni0IhfkUGr0qZRDZAirQwsrOltCFbLkXYgWxLSYUWskNiNI5sSklXgPyJGK0j61jSZrIITYyOkgU7ShhL1gvF+DEZpJfQiGyJHGmhZD9+kAvkh+QIPyWb9UEq3VNBmk3W/oMEskgU5J1klkJE7E02SJLSyOASojOMbI0k2YPINiJmAPkpScIuZIMQk8hM70QpjixCw1iyZijKe8ggAxuTTZKlx3Q7soH8B1nSapANP0CXIUs4hKz6l2SVncK0iQyCyPqgMF+no18lTfYQ5c5LE/ZSLaBQnNaq1gXF+bJqi+XJHqpYijxhP7XM7wQqUa22KNDpas2TKK2mUsclCieoZM4VqX0qtUeRfmNWaJFMYSeFUoUqQR1LvlDdVKcbCrUWqcwqqcIpylwVq+OqhDnEqrCiIsNQrmMU+V6w9iqSKVh5gUo0QskepEScaO1W4qRovQ9WIKhAtHC4Ar1Rto8qsFW4isP5HgsXzmJrgtJ9g22+eGnNuC6IFyYyhTvk63UAzzgU8OE8+yXsLEvgewnTmnD0QxHfzPGDjL3j+EXGsAJDZ03G6jBAioi9MHO00yRsC7AelLAuPB/b5SsTmJPkaz1XrXzp0ppywWrpugXsodnCZeWDqbJlq6qAOU20joGK3TXJilEC9gtWTqAadfLlagcoGi9X7VQJfChVf4KyfTShmq0OHJSpgjCFovJE6mdQ2SpSnyllviFQGaB2a7s8xSkGG8UpP0y14IfSlATKf6EJUzv14DtZugo6DM0SpbF6gF6aIL0K0AX8IEirgb4/S2imGNlq0YXl9+KA7k4p2gf0cfgwiAM2S1FnhjuIa1iC78rQVaDvhoi2ZhzQ3iZCIxiSEREvmThguQRl+dFF2j7AWSx+lwVoIdCvwBLzojigfp745IXR+T8vCVNYYLz4fA30w7H08SywT3jsdRguuZATyRKWKTv7gL695gIeYYEudsnR2jD8ii6PYYFlknMK6COLXcuJZDGdFpxeDKvQzRMsUCNbbG4BfdBrdzCWBXo6pSaGYQq6/a4uC6wRmnsmhgz38LyJxe+8zMQCfT+knMcCkS8lJsvCcI6kqDkLdHcIzGygb6uR4O1AFlgmLy+DGPYicSIPpIjLAqCvZ6dyRvNUfiwsrysybEPy5xEs0KZQVpYCfUQ+HR7jgVhNUnJCGVYi52we+FZS4oE+JIelsAWP5ZKc5FRimI+8dyqwQORzMYkH+sDnTLiLB7oUC0lOJYYZyK2N5oEpQrIE6P0z2fB9Ix7YLiKvKzJMQAXTgnj8z0nIfKA331UBk3gg/JF8PA9mGIVKauN4oHmeeMwCelOGGvhPUx4Y6BSOTAtDDKp6N4QHFgtHLDCmKYPJTPCLaNwxMwxFha1MARclYxgwpqlk+4wHqj6Si+vAOBSVfhHJA01yxSKawXRbLbzozwPRNqE4BYzDUfVtTDBFEwmtHYP5jnLaRCbYIBLJwDgW1S/swAS/CURxAwa/BzrApzWYgi7JwxZgnIy6/E8AD0Q8kIbcCIaALH1gEhM0eC0MS4AxDvUaxwSd8kUhK4ihYrZu7NFMMMghCWOBMR71m/MxE8zQ5OAmMIa/0xHeC2OCVW8f/XH+RPLObRtXLVswZ/bMGR/Ots5fmrBha9K+4+f+eJTr9I1pn3NsQl2n+jEpaQ5v3DVm9tqfTt0r8GUdBMaoQn3hdv25XLXdsAXfnc5y+qCKPuLYhXqP8ySlBrccviI5w+ZT+goYmzr0lXs5yeqBSra0HLvpTK6P6FUljqOo1/dXkqzRtcDzNxix6WKh72cqMHbVdOC8l7xsYH0oSy0drAdf+3TSzBxXUe28i9umdAqEsrnZrIO5vhqtKzAOR3WzU1YPawBlvLlj/BWnLyYZGAMeqZF9ImFgFBjFarFHC30t+bU55iL7+7Prh0SB0QwZebjIp7IcGCvnsGh3kiY3N4NBrTz1suYzeRzEkYjk+WdX960CBrdJYo6PZAgwNiymeXtkbkd/MMTBkzN8IanAeRjdf7V/VnMw1H0u+DyKG3F009zIPRzXHAx41/M+jnXAaPoDXSw8taidGYx67zRfRlZFjklYsnb7q+ggMPSmSa98F8OAMfTlB2/3TYgEL7DyZqeP4nfgXI/arVVdzOAtfnrfJ1HYkKPG3thI8CqDt2s+iATwrgfm+BzuB3pZUO8PH4MWDV53cLJvYQ8Y2UW7dmxKWDRj7IDPm0V6EoDVmg8hp7qhiUhDF7Xcu+d2b7QObV/VE8A0h+9gKpTFwc0GWTcfT8/D66FcEP6nC67mZxxNnN6jlr4gxuYruAhlq1+DfvO+P5PlxNLPBXFBlVsUpb67snNOdFXdwMBi30BxkzLD0jRmRXJ6Mbp/3J8LKl+nK1F7dmx536q6gEE2n8BKKAvrDVyanGFD8n0mLgi7xFOi9vfumS1NysFopw/gboCHC+k8dcelPOROYoOQ83wl5hyb18akFli9P+fn4Lmj+sUfeOhENRPZIDhVjQ/f7p8cpRJs9vZs/cEz1x265uQrVHoVGwQcVgYRtT8TWqtjTvXq0qzggWsOWpP6FtXXFrOB368KffhwVWNFoEqm1/Z2SxvwtMGfLTiQhXrV4tjAtE0tRO3yxCAloKPNK3OeHhkInjVqxDc3bKhrbSobwEpNLUR8s6a6CrDEC3ux5iPwqM2m73mCHtA5gQ/inKohFm6JVMB8xcty/j7EHzynqY318Bv0lI7RfDCqWDnE/NUhbNDU5k292VAfPGdz65Fc9Kj24XwQnace4vORbLDBe7o6PhA8Zd0pya/Q89qH8UHrFzpAPB7FFfLSOyr6uT14yEqDdjxED20bygd17+gBcycwwSxv6EV8NfCMbZddsKEHtw3hg7CzekBMDuUJeOb1/DHOAp4wZPhP2ejpbUP5wPKTLvBuIxaY6t04T3QHT9h88UU7loW2YXwAS5x6wJyuLGH5Xkzxriagf0v0lsdYZtqGKwBD/tEDFvblgF+8lveJtUD3lYbvzcUy1T5GAWiZqQcsiubo7aXkrqwCeq82JaUYy1zHRAWg6nk9YF4LBss7b+RtfEXQeZT1ggPLZOd0BcB/i6YDfBRGBwe9jzdLQ0Hf9eZf1bDM1uYqADA2Xwe4h2Gmt5EbHwq6rrvghoZlurZCBWhxXwdaX7qW3sU/a8JAz7WsVzUs+zepAKH71cN7fmTmAi/Ctr0G6LjKtPNONIY/mBUAmF2kHE4kg5teg7a/Ieh5iw2N428WFaD1PeXS6XZ7C1e6gK43o6FMragCVNylKYbdyVZ6B1mjQN+fOY0FXotQASAmR7GfyaZ6AwUJwaDvCg/QaN6rqwTUSlUr159qsPHTDtYBvW9G4/m8pRIAM/9RCTtSdTN893uB7rs6DQi+i1YDGlxQaRJVO4NXGB8Aug95hIbUNkENMM1+r85iqpbG7kxD8IDfo0HVEtQAqHNCGStVayOXMxE8YW/NqCD+EqAGQMxTRfpRdTRwB2uAJ6zyDA3sv8MVgZANxSoUh1H1MGxvRoBnTEZD+3cTRQAaHtb4fgPqGKN2rAZ4xlFocN/1UQWg62UurQPZl8YsbxJ4yKhco4OO+coA9L/J8xOQbzJkl+qDhzSdQQO8O0gZgN5nNLpTwXRHDJgjwQ885Tw0xLfqqAPQ8vv3NC+tfkD/yHg9/Rw8ZqsiY4RveioEEDL+pM0de+qYQGAM1wxXSgR4zKAMNMqOZSp9OGTbn7ZSnu6dAMwD0WA7loIH3Y4GOqWKWgAQ2LT36Akxn1cH/i0G63U0qDzw1wo8AzQjhU86q6bwE2N1qw4o3Ot6bkNgrfkajbVtoYf6BA313mBQt/M5dPYHVtMZNNy/V/dIPxkp5zJQt9FBDXEF8C5FA57d1wOFFhmogmGgbMQ2GyIeBt5P7EYMte3BHmcrGufXnUBVy/xcRMT0EJ7KT9Cg3+voYZrYjNOjhqDqgAf44duPgPcIGnb7mgBPYrqAhvl2DVC0YQqWaOsBvFY08ukdPMgCNMxXK4OaQSuLsOSZwNuh2NChY1Owp/jMZpguhYKaPR9iqduAt3ImGv1HvTxD3Ww0ypdCQMmI3RqWmurHdByNv7Yv0gNUv49G+UYlUHLUayw9vRLwLkav8N0cf71VT0ejnBEOKlY7jC6+qAO83R3eAeKd3vqqew+N8tMoUHHYa3TxfVvgrZmN3mNKUx11folGOa8FKFjpFw1dtPcBXssl9CYdSVF6mV6ERtnRDxTs8hhd1SYD81b0Mgu/rq6HiINonBcDv2mJHV1eDszjNW8DMT+xlnIjstE4HwH+qqno+g5gblOA3mhRUhOlmp1CA/04jK/zU3Q92cQUkYleqnayn0mV+jsdaKDtXYB9ejG6nmIBXv9z6MVmxtdRoe1uOxrqVcBt+Q7dvBAMzFvRu3X+e1ZNnqozrqPBvm3hCj+Pbl6vBMxTNC8HEbU/NvaLoKnQbfl/HGi0HR2AueFDdDOtMjB/Vozesfbk6PrJvVrUrPBBQESjrmPi96Tb0YjvAOZOr9HN9KrAXO81etuarciBRj4nnKlPPrqZXhWYQ9NRWq3AO9KGbt6OAGZzCkrrkwCeEQ5082YV4P4GxXUKsE5yopuXwoD7SxTXpxaWCU50M7UicA9wyMt84BziQDd/CwDu9vkorvlhHF2L0M3tJuCu/xLl9SdgbJSDrjsXAXvEfRTYbgxh99D1wuHAXuEqCuwzE8MBdP1FJ2D3O4ESux3oJ6Hr16KA/1cU2b50NXJd2xkI/N+gyNpD6Hahq/mxoGACyuxVIP/Y4UpGM1DQqgnNVrrtWLpzSxAoOEVDoZ1GFpRb2sMvQMWxTpTaHmQDsOSiNUGg4nA7im0Dsm0laAcagJIxdpTbELK/ENF5pD2oOcKOcmsH6jAnvtz0MSg62o6Cm0tWaX03M6ga60DJfU2m8mwniu5b/cVrKLv/6O5rlF7NT1+WvSi/1XUVdgYFuLWeaqejBA/VUeeXKMLx+oktQhk+qBfLdg2F+IVOal9BOW6iiwFvUJAX6iBoq4aSnKZe2wwU5k8Us6y0oTSfUOvTDJRnra9C1XZpKNHPa6himZuLQn0tRAnT6Eco1xfD+Ewxf6Fo32vGFBibgdJduMjCUHdNNkr4gzF+NJXGn3KilGclNHar3rTjRSjrD76L7Vj1A7+ortbdmSj0jtw3eRqW+7/c/+X+L/d/uf/L/V/u/3L/l/v//0P/X+L/r3L/l/u/HIAA" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">

    <script src="pdfium.js"></script>

    <script>
        let slideIndex = 1;

        async function loadFile() {
            try {
                changeButton('Loading file...', 'warning');

                let files = fileInput.files;

                if (files.length <= 0) {
                    throw { message: "Select a PDF file first" };
                }

                let file = files[0];

                let fileByteArray = await fileToByteArray(file);

                if (fileByteArray.length <= 0) {
                    throw { message: "The PDF file is invalid" };
                }

                processPDF(fileByteArray);
            } catch (error) {
                changeButton('Error while load file', 'danger');
                console.log('Error while load file: ' + error.message);
            }
        }

        function processPDF(fileByteArray) {
            try {
                // html general
                changeButton('Loading...', 'warning');

                let imageListContainer = document.getElementById('imageListContainer');
                let imageList = document.getElementById('imageList');
                let modalImageList = document.getElementById('modalImageList');
                let pageListTitle = document.getElementById('pageListTitle');

                imageListContainer.style.display = "none";

                imageList.innerHTML = "";
                modalImageList.innerHTML = "";

                // map functions
                console.log('Mapping functions...');

                PDFium_Init = Module.cwrap('PDFium_Init');
                PDFium_CreateAvailFromBuffer = Module.cwrap('PDFium_CreateAvailFromBuffer', 'number', ['number', 'number']);
                PDFium_CreateDocFromBuffer = Module.cwrap('PDFium_CreateDocFromBuffer', 'number', ['number', 'number']);
                PDFium_GetLastError = Module.cwrap('PDFium_GetLastError', 'string');
                PDFium_GetPageSizeByIndex = Module.cwrap('PDFium_GetPageSizeByIndex', 'number', ['number', 'number']);
                PDFium_GetRenderPageBitmap = Module.cwrap('PDFium_GetRenderPageBitmap', 'number', ['number', 'number']);
                PDFium_GetRenderPageDataSize = Module.cwrap('PDFium_GetRenderPageDataSize', 'number', ['number', 'number']);

                FPDF_GetPageCount = Module.cwrap('FPDF_GetPageCount', 'number', ['number']);
                FPDF_CloseDocument = Module.cwrap('FPDF_CloseDocument', '', ['number']);
                FPDF_DestroyLibrary = Module.cwrap('FPDF_DestroyLibrary');

                // check file size
                console.log('Getting file size...');

                let fileSize = fileByteArray.length;
                console.log("File size: " + fileSize + " bytes");

                // init library
                console.log('Initializing library...');

                PDFium_Init();

                // load document to memory
                console.log('Loading data to buffer...');

                let wasmBuffer = Module._malloc(fileSize);
                Module.HEAPU8.set(fileByteArray, wasmBuffer);

                // create document
                console.log('Loading document...');

                let doc = PDFium_CreateDocFromBuffer(wasmBuffer, fileSize, "");

                // check last error
                let lastError = PDFium_GetLastError();
                console.log("Load document state: " + lastError);
                Module._free(lastError);

                // count page
                console.log('Couting pages...');

                let pages = FPDF_GetPageCount(doc);
                console.log('Pages: ' + pages);

                // get first page
                if (pages > 0) {
                    console.log('Rendering ' + pages + ' PDF pages...');

                    for (let x = 0; x < pages; x++) {
                        console.log('Rendering page ' + (x + 1) + '...');

                        // get page size
                        let pageSizePtr = PDFium_GetPageSizeByIndex(doc, x);
                        let pageSize = []

                        for (let v = 0; v < 2; v++) {
                            pageSize.push(Module.HEAPF64[pageSizePtr / Float64Array.BYTES_PER_ELEMENT + v])
                        }

                        Module._free(pageSizePtr);

                        let pageWidth = parseInt(pageSize[0]);
                        let pageHeight = parseInt(pageSize[1]);

                        console.log("Page " + (x + 1) + " has size: " + pageWidth + "pt X " + pageHeight + "pt");

                        // get page render bytes
                        let pageRenderDataSize = PDFium_GetRenderPageDataSize(doc, x);

                        let pageRenderPtr = PDFium_GetRenderPageBitmap(doc, x);
                        let pageRenderData = [];
                        let pageRenderSize = pageRenderDataSize;

                        for (let v = 0; v < pageRenderSize; v++) {
                            pageRenderData.push(Module.HEAPU8[pageRenderPtr / Uint8Array.BYTES_PER_ELEMENT + v]);
                        }

                        console.log("Page render data size: " + pageRenderData.length);

                        Module._free(pageRenderPtr);

                        // render to canvas
                        let canvas = document.createElement('canvas');
                        let ctx = canvas.getContext('2d');

                        canvas.width = pageWidth;
                        canvas.height = pageHeight;

                        let idata = ctx.createImageData(pageWidth, pageHeight);
                        idata.data.set(pageRenderData);
                        ctx.putImageData(idata, 0, 0);

                        let dataUri = canvas.toDataURL();

                        // add normal image
                        let image = document.createElement('img');
                        image.src = dataUri;
                        image.onclick = function () {
                            openModal();
                            currentSlide(x + 1);
                        };

                        let content = document.createElement('div');
                        content.className = "content";
                        content.appendChild(image);

                        let cardContent = document.createElement('div');
                        cardContent.className = "card-content";
                        cardContent.appendChild(content);

                        let card = document.createElement('div');
                        card.className = "card";
                        card.appendChild(cardContent);

                        let column = document.createElement('div');
                        column.className = "column is-4";
                        column.appendChild(card);

                        imageList.appendChild(column);

                        // add modal image
                        let imageModal = document.createElement('img');
                        imageModal.src = dataUri;

                        let itemSlide = document.createElement('div');
                        itemSlide.className = "item-slide";
                        itemSlide.appendChild(imageModal);

                        modalImageList.appendChild(itemSlide);

                        // show results
                        console.log('Page ' + (x + 1) + ' rendered');
                    }

                    pageListTitle.innerHTML = "Page list showing " + pages + " pages";

                    imageListContainer.style.display = "block";
                    showSlides(slideIndex);
                } else {
                    console.log('Cannot render PDF pages: PDF is empty');
                }

                // clean memory
                console.log('Cleaning objects...');

                Module._free(wasmBuffer);

                FPDF_CloseDocument(doc);
                FPDF_DestroyLibrary();

                // initial state
                buttonToInitialState();

                console.log('Finished');
            } catch (error) {
                changeButton('Error while process PDF', 'danger');
                console.log('Error while process PDF: ' + error.message);
            }
        }

        function fileToByteArray(file) {
            return new Promise((resolve, reject) => {
                try {
                    let reader = new FileReader();
                    let fileByteArray = [];

                    reader.readAsArrayBuffer(file);
                    reader.onloadend = (evt) => {
                        if (evt.target.readyState == FileReader.DONE) {
                            let arrayBuffer = evt.target.result,
                                array = new Uint8Array(arrayBuffer);
                            for (byte of array) {
                                fileByteArray.push(byte);
                            }
                        }
                        resolve(fileByteArray);
                    }
                }
                catch (e) {
                    reject(e);
                }
            })
        }

        function changeButton(text, className) {
            btRun.firstChild.data = text;
            btRun.className = 'button is-' + className;
        }

        function buttonToInitialState() {
            changeButton('Process file', 'success');
        }

        function openModal() {
            let modal = document.getElementById('galleryModal');

            if (typeof modal != "undefined") {
                modal.style.display = "block";
            }
        }

        function closeModal() {
            let modal = document.getElementById('galleryModal');

            if (typeof modal != "undefined") {
                modal.style.display = "none";
            }
        }

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("item-slide");
            let captionText = document.getElementById("caption");

            if (n > slides.length) {
                slideIndex = 1;
            }

            if (n < 1) {
                slideIndex = slides.length;
            }

            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }

            let slide = slides[slideIndex - 1];

            if (typeof slide != "undefined") {
                slide.style.display = "block";
            }
        }

        function load() {
            // change console methods
            if (typeof console != "undefined") {
                if (typeof console.log != 'undefined') {
                    console.olog = console.log;
                } else {
                    console.olog = function () { };
                }
            }

            console.log = function (message) {
                // we will disable it for now
                // console.olog(message);

                var currentDate = new Date().toLocaleTimeString();

                var e = document.createElement('p');
                e.innerHTML = "➔ [" + currentDate + "] " + message;

                document.getElementById('debugDiv').prepend(e);
            };

            console.error = console.debug = console.info = console.log;

            // button
            let btRun = document.getElementById('btRun');

            // check for wasm support
            if (!('WebAssembly' in window)) {
                console.log('You need a browser with Web Assembly support enabled :(');
                changeButton('Web Assembly not supported', 'danger');
                return;
            }

            // file input
            var fileInput = document.querySelector('#file-container input[type=file]');
            fileInput.onchange = () => {
                if (fileInput.files.length > 0) {
                    var fileName = document.querySelector('#file-container .file-name');
                    fileName.textContent = fileInput.files[0].name;
                }
            }

            // initial state
            buttonToInitialState();

            btRun.onclick = function () {
                loadFile();
            }
        }

        window.onload = function (e) {
            load();
        }
    </script>

    <style>
        /* general */
        body {
            touch-action: pan-x pan-y;
        }

        /* slide */
        .item-slide {
            box-sizing: border-box;
        }

        .item-slide img {
            max-width: 100%;
        }

        /* modal (background) */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        /* modal Content */
        .modal-content {
            position: relative;
            background-color: rgba(0, 0, 0, 0);
            width: 90%;
            max-width: 1200px;
            max-height: 700px;
            overflow: hidden;
            text-align: center;
        }

        .modal img {
            height: 100vh;
        }

        .item-slide {
            display: none;
        }

        /* next & previous buttons */
        .prev,
        .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -50px;
            color: white;
            font-weight: bold;
            font-size: 20px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            -webkit-user-select: none;
        }

        /* position the "next button" to the right */
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }


        /* number text (1/3 etc) */
        .numbertext {
            color: #f2f2f2;
            font-size: 12px;
            padding: 8px 12px;
            position: absolute;
            right: 0;
            top: 0;
        }

        .caption-container {
            color: white;
        }

        .column img {
            margin-top: 20px;
        }

        /* image list */
        #imageList .card-content {
            padding: 0;
        }
    </style>
</head>

<body>
    <section class="section">
        <div class="container">
            <h1 class="title">
                PDFium - Test
            </h1>
            <br>
            <p>1 - Select your PDF file:</p>
            <br>
            <div id="file-container" class="file is-info has-name is-boxed">
                <label class="file-label">
                    <input class="file-input" id="fileInput" type="file" accept="application/pdf">
                    <span class="file-cta">
                        <span class="file-label">
                            Choose a file…
                        </span>
                    </span>
                    <span class="file-name">
                        No file uploaded
                    </span>
                </label>
            </div>
            <br>
            <br>
            <p>2 - Press button to process:</p>
            <br>
            <button class="button is-warning" id="btRun">Loading...</button>
            <br>
            <br>
            <br>
            <div id="imageListContainer" style="margin-bottom: 30px; display: none;">
                <p style="font-weight: bold;" id="pageListTitle">Page list</p>
                <section class="section">
                    <div class="container is-fluid">
                        <div class="columns is-multiline is-mobile" id="imageList">

                        </div>

                        <div class="modal" id="galleryModal">
                            <div class="modal-content is-vcentered" id="modalImageList">

                            </div>

                            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>

                            <a class="next" onclick="plusSlides(1)">&#10095;</a>

                            <button onclick="closeModal()" class="modal-close is-large" aria-label="close"></button>
                        </div>
                    </div>
                </section>
            </div>
            <div class="card">
                <header class="card-header">
                    <p class="card-header-title">
                        Debug console
                    </p>
                </header>
                <div class="card-content">
                    <div class="content">
                        <div id="debugDiv">
                            <p>➔ Debug messages will be showed here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>